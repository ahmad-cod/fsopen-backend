(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(14),u=t.n(r),o=(t(19),t(3)),a=t(0),i=function(e){var n=e.handleChange;return Object(a.jsxs)("p",{children:["Filter shown with ",Object(a.jsx)("input",{id:"filter",placeholder:"filter",onChange:n})]})},s=function(e){var n=e.handleChange,t=e.handleSubmit,c=e.value;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsxs)("div",{children:["Name: ",Object(a.jsx)("input",{id:"name",placeholder:"new name",onChange:n,value:c.newName})]}),Object(a.jsxs)("div",{children:["Number: ",Object(a.jsx)("input",{id:"number",placeholder:"contact number",onChange:n,value:c.newNumber})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"Add"})})]})})},l=function(e){var n=e.person,t=e.del;return Object(a.jsx)("div",{className:"Person",children:Object(a.jsxs)("li",{children:[n.name," ",n.number," ",Object(a.jsx)("button",{style:{background:"red",color:"white",padding:"2px 10px",margin:"2px 15px",borderRadius:"6px",outline:"none"},onClick:function(){window.confirm("Are you sure you want to delete this contact?")&&t(n.id)},children:"delete"})]})})},d=function(e){var n=e.persons,t=e.filtered,c=e.del;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("ul",{children:t.length?t.map((function(e){return Object(a.jsx)(l,{person:e,del:c},e.id)})):n.map((function(e){return Object(a.jsx)(l,{person:e,del:c},e.id)}))})})},j=t(4),b=t.n(j),f="/api/persons",h=function(){return b.a.get(f)},m=function(e){return b.a.post(f,e)},p=function(e,n){return b.a.put("".concat(f,"/").concat(e),n)},O=function(e){return b.a.delete("".concat(f,"/").concat(e))},x=function(e){var n=e.message;return null===n?null:n.error?Object(a.jsx)("div",{className:"error",children:n}):Object(a.jsx)("div",{className:"success",children:n.success})},g=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],u=Object(c.useState)(""),l=Object(o.a)(u,2),j=l[0],b=l[1],f=Object(c.useState)(""),g=Object(o.a)(f,2),v=g[0],w=g[1],C=Object(c.useState)([]),N=Object(o.a)(C,2),y=N[0],S=N[1],k=Object(c.useState)(null),T=Object(o.a)(k,2),E=T[0],F=T[1];Object(c.useEffect)((function(){console.log("effect"),h().then((function(e){console.log(e),r(e.data)}))}),[]);var A=function(e){if("name"===e.target.id)return S(""),b((function(){return e.target.value}));if("number"===e.target.id)return S(""),w((function(){return e.target.value}));if("filter"===e.target.id){var n=t.filter((function(n){return new RegExp(e.target.value,"i").test(n.name)}));console.log(n),S(n)}};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(x,{message:E}),Object(a.jsx)(i,{handleChange:A}),Object(a.jsx)(s,{handleChange:A,handleSubmit:function(e){if(e.preventDefault(),!j)return alert("please input a name");var n=t.find((function(e){return e.name===j}));if(n){if(console.log("same person",n.id),window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one")))return p(n.id,{name:j,number:v}).then((function(e){console.log(e),r(t.map((function(t){return t.id!==n.id?t:e.data})))})).catch((function(e){F({error:e}),setTimeout((function(){return F(null)}),5e3)}));b(""),w("")}m({name:j,number:v}).then((function(e){console.log(e),r(t.concat(e.data)),F({success:"".concat(j," has been created successfully")}),setTimeout((function(){return F(null)}),4e3)})).catch((function(e){F({error:e}),setTimeout((function(){return F(null)}),5e3)})),b(""),w("")},value:{newName:j,newNumber:v}}),Object(a.jsx)("h2",{children:"Contacts"}),Object(a.jsx)(d,{persons:t,filtered:y,del:function(e){console.log(e);var n=t.find((function(n){return n.id===e}));O(e).then((function(c){r(t.filter((function(n){return n.id!==e}))),F({success:"You successfully deleted ".concat(n.name)}),setTimeout((function(){return F(null)}),4e3)}))}})]})};u.a.render(Object(a.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.545e2dde.chunk.js.map