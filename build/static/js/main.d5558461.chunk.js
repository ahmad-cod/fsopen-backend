(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(14),u=t.n(r),o=(t(19),t(3)),i=t(0),a=function(e){var n=e.handleChange;return Object(i.jsxs)("p",{children:["filter shown with ",Object(i.jsx)("input",{id:"filter",onChange:n})]})},s=function(e){var n=e.handleChange,t=e.handleSubmit,c=e.value;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{id:"name",onChange:n,value:c.newName})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{id:"number",onChange:n,value:c.newNumber})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})})},l=function(e){var n=e.person,t=e.del;return Object(i.jsx)("div",{className:"Person",children:Object(i.jsxs)("li",{children:[n.name," ",n.number," ",Object(i.jsx)("button",{style:{background:"red",color:"white",padding:"2px 10px",borderRadius:"10px"},onClick:function(){window.confirm("Are you sure you want to delete this contact?")&&t(n.id)},children:"delete"})]})})},d=function(e){var n=e.persons,t=e.filtered,c=e.del;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("ul",{children:t.length?t.map((function(e){return Object(i.jsx)(l,{person:e,del:c},e.id)})):n.map((function(e){return Object(i.jsx)(l,{person:e,del:c},e.id)}))})})},j=t(4),f=t.n(j),b="/api/persons",h=function(){return f.a.get(b)},m=function(e){return f.a.post(b,e)},O=function(e,n){return f.a.put("".concat(b,"/").concat(e),n)},p=function(e){return f.a.delete("".concat(b,"/").concat(e))},g=function(e){var n=e.message;return null===n?null:n.error?Object(i.jsx)("div",{className:"error",children:n}):Object(i.jsx)("div",{className:"success",children:n.success})},x=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],u=Object(c.useState)(""),l=Object(o.a)(u,2),j=l[0],f=l[1],b=Object(c.useState)(""),x=Object(o.a)(b,2),v=x[0],w=x[1],C=Object(c.useState)([]),y=Object(o.a)(C,2),S=y[0],N=y[1],k=Object(c.useState)(null),T=Object(o.a)(k,2),E=T[0],F=T[1];Object(c.useEffect)((function(){console.log("effect"),h().then((function(e){console.log(e),r(e.data)}))}),[]);var J=function(e){if("name"===e.target.id)return f((function(){return e.target.value}));if("number"===e.target.id)return w((function(){return e.target.value}));if("filter"===e.target.id){var n=t.filter((function(n){return n.name.includes(e.target.value)}));console.log(n),N((function(){return n}))}};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(g,{message:E}),Object(i.jsx)(a,{handleChange:J}),Object(i.jsx)(s,{handleChange:J,handleSubmit:function(e){if(e.preventDefault(),!j)return alert("please input a name");var n=t.find((function(e){return e.name===j}));if(n&&(console.log("same person",n.id),window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one"))))return O(n.id,{name:j,number:v}).then((function(e){console.log(e),r(t.map((function(t){return t.id!==n.id?t:e.data})))})).catch((function(e){F({error:e}),setTimeout((function(){return F(null)}),5e3)}));m({name:j,number:v}).then((function(e){console.log(e),r(t.concat(e.data)),F({success:"".concat(j," has been created successfully")}),setTimeout((function(){return F(null)}),4e3)})).catch((function(e){F({error:e}),setTimeout((function(){return F(null)}),5e3)})),f(""),w("")},value:{newName:j,newNumber:v}}),Object(i.jsx)("h2",{children:"Contacts"}),Object(i.jsx)(d,{persons:t,filtered:S,del:function(e){console.log(e);var n=t.find((function(n){return n.id===e}));p(e).then((function(c){console.log(c),r(t.filter((function(n){return n.id!==e}))),F({success:"You successfully deleted ".concat(n.name)}),setTimeout((function(){return F(null)}),4e3)}))}})]})};u.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d5558461.chunk.js.map